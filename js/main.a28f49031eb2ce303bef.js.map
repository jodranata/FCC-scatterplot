{"version":3,"sources":["webpack:///./src/create/createTooltip.js","webpack:///./src/handleHover.js","webpack:///./src/constant.js","webpack:///./src/render/renderChart.js","webpack:///./src/render/renderScale.js","webpack:///./src/render/renderLegend.js","webpack:///./src/create/createDropShadow.js","webpack:///./src/index.js","webpack:///./src/create/createScale.js"],"names":["createTooltip","dataDetail","Name","Year","Time","Doping","Nationality","Place","dopingText","tooltip","select","append","attr","style","chartConstant","legendIndex","rad","renderChart","svg","dataArr","xScale","yScale","selectAll","data","enter","d","sec","Seconds","dateObj","Date","setSeconds","dotColor","findIndex","i","color","push","text","on","d3","this","transition","duration","pos","tooltipText","tooltipBackground","html","x","y","handleHoverIn","height","yPadding","xPadding","renderScale","xAxis","tickFormat","yAxis","secDate","call","renderLegend","element","legend","each","li","createDropShadow","dropShadowFilter","width","marginLeft","svgContainer","legendList","then","res","minRange","maxRange","xMax","xMin","map","domain","range","yMin","yMax","createYScale"],"mappings":"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","file":"js/main.a28f49031eb2ce303bef.js","sourcesContent":["const createTooltip = dataDetail => {\n  const { Name, Year, Time, Doping, Nationality, Place } = dataDetail;\n  const dopingText = Doping || 'No allegations or evidence of doping';\n  return `\n  <div class=\"tooltip-head\">${Name}<span class=\"nationality\">(${Nationality})</span></div>\n  <div class=\"tooltip-body\">\n    <div class=\"tooltip-detail detail-list\">\n      <div class=\"key-value\">\n        <div>Time</div>\n        <div>:</div>\n        <div>${Time}</div>\n      </div>\n      <div class=\"key-value\">\n        <div>Place</div>\n        <div>:</div>\n        <div>${Place}</div>\n      </div>\n      <div class=\"key-value\">\n        <div>Year</div>\n        <div>:</div>\n        <div>${Year}</div>\n      </div>\n    </div>\n    <div class=\"tooltip-detail doping\">\n      ${dopingText}\n    </div>\n  </div>\n  `;\n};\n\nexport default createTooltip;\n","import { select } from 'd3';\nimport createTooltip from './create/createTooltip';\n\nconst tooltip = select('.chart-svg')\n  .append('div')\n  .attr('id', 'tooltip')\n  .style('display', 'none')\n  .style('opacity', '0');\n\nconst marginLeft = 75;\n\nexport const handleHoverIn = (data, pos) => {\n  const tooltipText = createTooltip(data);\n  const tooltipBackground = data.Doping ? '#e94f4fdc' : '#24d47cdc';\n  tooltip\n    .transition()\n    .duration(100)\n    .style('display', 'block')\n    .style('background', `${tooltipBackground}`);\n\n  tooltip\n    .transition()\n    .duration(200)\n    .style('opacity', 0.9);\n\n  tooltip\n    .html(tooltipText)\n    .attr('data-year', data.Year)\n    .style('left', `${pos.x + marginLeft + 15}px`)\n    .style('top', `${pos.y}px`)\n    .style('transform', 'translateY(-50%)');\n};\n\nexport const handleHoverOut = () => {\n  tooltip\n    .transition()\n    .duration(100)\n    .style('display', 'none');\n  tooltip\n    .transition()\n    .duration(150)\n    .style('background', `none`);\n  tooltip\n    .transition()\n    .duration(200)\n    .style('opacity', '0');\n};\n","export const chartConstant = {\n  width: 850,\n  height: 550,\n  rad: 7,\n  marginLeft: 75,\n  xPadding: 50,\n  yPadding: 35,\n};\n\nexport const legendIndex = [];\n","import * as d3 from 'd3';\nimport { handleHoverIn, handleHoverOut } from '../handleHover';\nimport { chartConstant, legendIndex } from '../constant';\n\nconst { rad } = chartConstant;\n\nconst secDateObj = sec => {\n  const dateObj = new Date(null);\n  dateObj.setSeconds(sec);\n  return dateObj;\n};\n\nconst renderChart = (svg, dataArr, xScale, yScale) => {\n  svg\n    .selectAll('circle')\n    .data(dataArr)\n    .enter()\n    .append('circle')\n    .attr('data-xvalue', d => d.Year)\n    .attr('data-yvalue', d => secDateObj(d.Seconds))\n    .attr('cx', d => xScale(d.Year))\n    .attr('cy', d => yScale(d.Seconds))\n    .attr('r', rad)\n    .attr('class', 'dot')\n    .style('fill', 'transparent')\n    .style('stroke', d => {\n      const dotColor = d.Doping ? '#e94f4f' : '#24d47c';\n      const dopingText = d.Doping\n        ? 'Alleged or convicted of doping'\n        : 'No evidence of doping';\n      const idx = legendIndex.findIndex(i => i.color === dotColor);\n      if (idx === -1) {\n        legendIndex.push({\n          color: dotColor,\n          text: dopingText,\n        });\n      }\n      return dotColor;\n    })\n    .on('mouseover', function(d) {\n      d3.select(this)\n        .transition()\n        .duration(150)\n        .style('fill', `${d.Doping ? '#e94f4f' : '#24d47c'}`)\n        .style('filter', 'url(#drop-shadow)');\n\n      const pos = {\n        x: xScale(d.Year),\n        y: yScale(d.Seconds),\n      };\n      handleHoverIn(d, pos);\n    })\n    .on('mouseleave', function() {\n      d3.select(this)\n        .transition()\n        .duration(150)\n        .style('fill', `transparent`)\n        .style('filter', null);\n      handleHoverOut();\n    });\n};\n\nexport default renderChart;\n","import * as d3 from 'd3';\nimport { chartConstant } from '../constant';\n\nconst { height, yPadding, xPadding } = chartConstant;\n\nconst renderScale = (svg, xScale, yScale) => {\n  const xAxis = d3.axisBottom(xScale).tickFormat(d3.format('d'));\n  const yAxis = d3.axisLeft(yScale).tickFormat(d => {\n    const secDate = new Date(null);\n    secDate.setSeconds(d);\n    return d3.timeFormat('%M:%S')(secDate);\n  });\n\n  svg\n    .append('g')\n    .attr('id', 'x-axis')\n    .attr('transform', `translate(0, ${height - yPadding})`)\n    .call(xAxis);\n\n  svg\n    .append('g')\n    .attr('id', 'y-axis')\n    .attr('transform', `translate(${xPadding}, 0)`)\n    .call(yAxis);\n};\n\nexport default renderScale;\n","import * as d3 from 'd3';\nimport { chartConstant } from '../constant';\n\nconst { rad } = chartConstant;\nconst renderLegend = (element, legend) => {\n  element\n    .selectAll('li')\n    .data(legend)\n    .enter()\n    .append('li')\n    .attr('class', 'legend-item')\n    .each(function(d, i) {\n      const li = d3.select(this);\n      const legendSvg = li\n        .append('svg')\n        .attr('width', rad * 2 + 6)\n        .attr('height', rad * 2 + 6)\n        .style('vertical-align', 'middle')\n        .style('margin-right', '3.5px');\n\n      legendSvg\n        .append('circle')\n        .attr('r', rad)\n        .style('transform', `translate(50%, 50%)`)\n        .style('stroke', d.color)\n        .style('stroke-width', '3px')\n        .style('fill', 'transparent');\n\n      li.append('span')\n        .text(d.text)\n        .style('color', '#f0f0f0')\n        .style('font-weight', 600);\n    });\n};\n\nexport default renderLegend;\n","const createDropShadow = svg => {\n  const defs = svg.append('defs');\n  const dropShadowFilter = defs\n    .append('svg:filter')\n    .attr('id', 'drop-shadow')\n    .attr('filterUnits', 'userSpaceOnUse')\n    .attr('width', '250%')\n    .attr('height', '250%');\n  dropShadowFilter\n    .append('svg:feGaussianBlur')\n    .attr('in', 'SourceGraphic')\n    .attr('stdDeviation', 5)\n    .attr('result', 'blur-out');\n  dropShadowFilter\n    .append('svg:feColorMatrix')\n    .attr('in', 'blur-out')\n    .attr('type', 'hueRotate')\n    .attr('values', 0)\n    .attr('result', 'color-out');\n  dropShadowFilter\n    .append('svg:feOffset')\n    .attr('in', 'color-out')\n    .attr('dx', 0)\n    .attr('dy', 0)\n    .attr('result', 'the-shadow');\n  dropShadowFilter\n    .append('svg:feBlend')\n    .attr('in', 'SourceGraphic')\n    .attr('in2', 'the-shadow')\n    .attr('mode', 'normal');\n  return dropShadowFilter;\n};\n\nexport default createDropShadow;\n","import * as d3 from 'd3';\nimport renderChart from './render/renderChart';\nimport renderScale from './render/renderScale';\nimport renderLegend from './render/renderLegend';\nimport createDropShadow from './create/createDropShadow';\nimport { createXscale, createYScale } from './create/createScale';\nimport { chartConstant, legendIndex } from './constant';\nimport './style.css';\n\nconst url = `https://raw.githubusercontent.com/freeCodeCamp/ProjectReferenceData/master/cyclist-data.json`;\nconst { width, height, marginLeft, xPadding, yPadding } = chartConstant;\n\nconst svgContainer = d3\n  .select('.chart-svg')\n  .append('svg')\n  .attr('width', width + 100)\n  .attr('height', height + 50)\n  .style('margin-left', marginLeft);\n\nconst svg = d3.select('svg');\ncreateDropShadow(svg);\n\nconst legendContainer = d3\n  .select('.chart-svg')\n  .append('div')\n  .attr('id', 'legend')\n  .style('top', `${height + 10}px`);\n\nconst legendList = legendContainer.append('ul').attr('class', 'legend-lists');\n\nd3.json(url).then(res => {\n  const xScale = createXscale(res, xPadding, width);\n  const yScale = createYScale(res, yPadding, height - yPadding);\n\n  renderScale(svgContainer, xScale, yScale);\n  renderChart(svgContainer, res, xScale, yScale);\n  renderLegend(legendList, legendIndex);\n});\n","import * as d3 from 'd3';\n\nexport const createXscale = (dataArr, minRange, maxRange) => {\n  const xMax = d3.max(dataArr.map(i => i.Year));\n  const xMin = d3.min(dataArr.map(i => i.Year));\n  return d3\n    .scaleTime()\n    .domain([xMin - 1, xMax + 1])\n    .range([minRange, maxRange]);\n};\n\nexport const createYScale = (dataArr, minRange, maxRange) => {\n  const yMin = d3.min(dataArr.map(i => i.Seconds));\n  const yMax = d3.max(dataArr.map(i => i.Seconds));\n  return d3\n    .scaleLinear()\n    .domain([yMin, yMax])\n    .range([minRange, maxRange]);\n};\n"],"sourceRoot":""}